<div appScrollToTop>
    <form class="d-block" [formGroup]="form" (ngSubmit)="onSave()">
        <div formGroupName="languages">
            <div class="mt-1" fxLayout="row" fxLayoutAlign="space-between" fxLayoutGap="20px">
    
                <ion-item class="custom-select w-100" fxLayout="column" fxFlex.xs="45%" tabindex="0">
                    <ion-label position="floating">Langue</ion-label>
                    <ion-select class="w-100" ok-text="Ok" cancel-text="Annuler" placeholder="Sélectionner"
                        formControlName="language">
                        <ion-select-option *ngFor="let item of globalService.languages | languages:languagesList"
                            [value]="item._id">
                            {{item.name}}
                        </ion-select-option>
                    </ion-select>
                </ion-item>
    
                <ion-item class="custom-select w-100" fxLayout="column" fxFlex.xs="45%" tabindex="1">
                    <ion-label position="floating">Niveau de langue</ion-label>
                    <ion-select class="w-100" ok-text="Ok" cancel-text="Annuler" placeholder="Sélectionner"
                        formControlName="languageLevel">
                        <ion-select-option *ngFor="let item of globalService.languagesLevels" [value]="item._id">
                            {{item.name}}
                        </ion-select-option>
                    </ion-select>
                </ion-item>
    
            </div>
            <small class="text-error" *ngIf="languagesList <= 0">
                Veuillez renseigner au moins une valeur et cliquer sur ajouter
            </small> 
        </div>  
    
        <div class="mt-1 text-left">
            <ion-button fill="outline" class="btn-outline w-40" color="primary" tabindex="3"
                [disabled]="!form.get('languages').get('language').value || !form.get('languages').get('languageLevel').value"
                (click)="addLanguage()">
                Ajouter
                <ion-icon slot="start" name="add"></ion-icon>
            </ion-button>
        </div>
        <div class="mb-1 mt-1">
            <ul class="customList">
                <li *ngFor="let item of languagesList;let i =index;">
                    <span class="text-primary text-left">{{ item.language.name }} : {{ item.languageLevel.name }}</span>
                    <mat-icon class="cursor-pointer btn-round vertical-align ml-1" (click)="deleteLanguage(i)">
                        close</mat-icon><br>
                </li>
            </ul>
        </div>
    
        <div class="mb-1" fxLayout="row" fxLayoutAlign="space-between" fxLayoutGap="20px"
            formGroupName="programingLanguages">
            <div fxLayout="column" fxFlex.xs="45%">
                <app-multi-select label="Langages informatiques" collection="programmingLanguages"
                    formControlName="language"></app-multi-select>
                <small class="text-error" *ngIf="form.get('programingLanguages.language').value?.length <= 0">
                    Champ obligatoire
                </small>
            </div>
            <div fxLayout="column" fxFlex.xs="45%">
                <app-multi-select label="Logiciels informatiques" collection="logiciels" formControlName="logiciel">
                </app-multi-select>
                <small class="text-error" *ngIf="form.get('programingLanguages.logiciel').value?.length <= 0">
                    Champ obligatoire
                </small>
            </div>
        </div>
    
        <app-file-uploader [data]="{ file: candidateService.candidate['cv'], type: 'simple-cv' }"
            (fileChanges)="fileChanges($event)">
        </app-file-uploader>
    
        <div class="custom-input-icon">
            <ion-icon class="align-middle" src="./assets/icon/website-input.svg"></ion-icon>
            <mat-form-field class="ml-1 w-90">
                <mat-label>Site internet</mat-label>
                <input matInput placeholder="" formControlName="webSite">
                <span matPrefix>www.</span>
            </mat-form-field>
        </div>
        
        <div class="custom-input-icon">
            <ion-icon class="align-middle" src="./assets/icon/blogger-input.svg"></ion-icon>
            <mat-form-field class="ml-1 w-90">
                <mat-label>Blog</mat-label>
                <input matInput placeholder="" formControlName="blog">
                <span matPrefix>www.</span>
            </mat-form-field>
        </div>

        <div class="custom-input-icon">
            <ion-icon class="align-middle" src="./assets/icon/linkedin-input.svg"></ion-icon>
            <mat-form-field class="ml-1 w-90">
                <mat-label>Profil linkedin</mat-label>
                <input matInput placeholder="Insérer le lien de votre profil Linkedin" formControlName="linkedin">
            </mat-form-field>
        </div>

        <div class="custom-input-icon">
            <ion-icon class="align-middle" src="./assets/icon/instagram-input.svg"></ion-icon>
            <mat-form-field class="ml-1 w-90">
                <mat-label>Instagram</mat-label>
                <input matInput placeholder="" formControlName="instagram">
                <span matPrefix>@</span>
            </mat-form-field>
        </div>

        <div class="custom-input-icon">
            <ion-icon class="align-middle" src="./assets/icon/twitter-input.svg"></ion-icon>
            <mat-form-field class="ml-1 w-90">
                <mat-label>Twitter</mat-label>
                <input matInput placeholder="" formControlName="twitter">
                <span matPrefix>@</span>
            </mat-form-field>
        </div>

        <div class="custom-input-icon">
            <ion-icon class="align-middle" src="./assets/icon/facebook-input.svg"></ion-icon>
            <mat-form-field class="ml-1 w-90">
                <mat-label>Facebook</mat-label>
                <input matInput placeholder="" formControlName="facebook">
            </mat-form-field>
        </div>
    
        <div class="mt-2 mb-3 text-center">
            <ion-button type="submit" class="w-80" color="primary" [disabled]="languagesList.length <= 0
            || form.get('programingLanguages.logiciel').value?.length <= 0
            || form.get('programingLanguages.language').value?.length <= 0 || !form.valid">
            
                Continuez
            </ion-button>
        </div>
    
    </form>
</div>